# Composer Repository with Satis

This project is a Laravel-based Composer package repository using Satis. It provides a web interface for managing private PHP packages with authentication.

## Features

- FilamentPHP admin panel for easy management
- Token-based authentication for package access
- Package versioning and archiving
- Secure package distribution

## Requirements

- PHP 8.2 or higher
- Composer
- Node.js and npm/pnpm

## Installation

1. Clone the repository:
   ```bash
   git clone https://github.com/jeffersongoncalves/satis-filament-license-manager.git
   cd satis-filament-license-manager
   ```

2. Install PHP dependencies:
   ```bash
   composer install
   ```

3. Install JavaScript dependencies:
   ```bash
   pnpm install
   ```

4. Copy the environment file and generate an application key:
   ```bash
   cp .env.example .env
   php artisan key:generate
   ```

5. Configure your database in the `.env` file:
   ```
   DB_CONNECTION=mysql
   DB_HOST=127.0.0.1
   DB_PORT=3306
   DB_DATABASE=composer_repository
   DB_USERNAME=root
   DB_PASSWORD=
   ```

6. Run migrations:
   ```bash
   php artisan migrate
   ```

7. Build assets:
   ```bash
   pnpm run build
   ```

8. Start the development server:
   ```bash
   php artisan serve
   ```

## Satis Configuration

### Token Authentication

This repository uses a token-based authentication system for package access. Each token has:

- A username (always "token")
- A password (the generated token)

### Token Model

The Token model is responsible for generating and managing authentication tokens. Key features:

- Tokens are automatically generated when a new Token model is created
- Tokens are 36 characters long random strings
- Each token can be associated with specific packages

### Generating a Token

Tokens can be created through the admin interface or programmatically:

```php
use App\Models\Token;

$token = Token::create([
    'name' => 'My Project Token',
]);

// The token is automatically generated by the TokenObserver
echo $token->token; // The generated token value
```

### Using Tokens with Composer

To use a token for authentication with this Composer repository:

1. Add the repository to your project's `composer.json`:
   ```json
   {
       "repositories": [
           {
               "type": "composer",
               "url": "https://your-repository-url.com"
           }
       ]
   }
   ```

2. Configure authentication using the Composer command:
   ```bash
   composer config http-basic.your-repository-url.com token YOUR_TOKEN_VALUE
   ```

   Or manually add to your global Composer auth.json:
   ```json
   {
       "http-basic": {
           "your-repository-url.com": {
               "username": "token",
               "password": "YOUR_TOKEN_VALUE"
           }
       }
   }
   ```

## Usage

1. Create tokens for authentication
2. Add packages to the repository
3. Associate tokens with packages to control access
4. Use the tokens in your Composer projects to access private packages

## License

This project is licensed under the MIT License - see the LICENSE file for details.
